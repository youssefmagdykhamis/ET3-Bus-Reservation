jQuery(function(t){function s(n,p,r,o){var _=(new Date).getTime();t.ajax({url:ajaxurl,type:"POST",data:{action:"st_sync_price_process",offset:n,total:p,step:3,post_type:r,index:o},success:function(n){if(parseInt(n.stop))return a=!0,c.append('<br /><b class="sync-done">Successful all.</b><br>'),"undefined"!=n.last_sync&&t(".st-sync-price-note").text("Last Sync: "+n.last_sync),void t(".st_btn_start_sync_price").text(e);if(parseInt(n.offset)<=parseInt(n.total)&&parseInt(n.stop)<1){0==parseInt(n.offset)&&(parseInt(n.index)>0?c.append('<b class="sync-done">Done</b><br /><br /><b>Start sync '+n.post_type+"<b><br />"):c.append("<br /><b>Start sync "+n.post_type+"</b><br />"));var p=(new Date).getTime();c.append("on sync "+n.offset+"/"+n.total+" ("+(p-_)/1e3+"s) ...<br />"),s(parseInt(n.offset)+10,parseInt(n.total),n.post_type,parseInt(n.index))}}})}var e=t(".st_btn_start_sync_price").data("text"),n=t(".st_btn_start_sync_price").data("text-in"),a=!0,c=t(".st_sync_price_log");t(".st_btn_start_sync_price").on("click",function(){c.html(""),c.append("<b>Starting Sync Price Data</b><br>"),a&&(a=!1,t(this).text(n),t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"st_sync_price_process",step:1},success:function(e){t.ajax({url:ajaxurl,type:"POST",data:{action:"st_sync_price_process",step:2,post_type:e},success:function(t){s(0,t.total,e)}})}}))})});