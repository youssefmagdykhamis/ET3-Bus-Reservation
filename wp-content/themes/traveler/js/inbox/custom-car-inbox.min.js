jQuery(function(t){function a(t){return t="0"+t,t=parseFloat(t),t}t(".pickup").on("change",function(){var a=t(this);t(".drop-off-location").is(":visible")||t(".dropoff").val(a.val())}),t(".car-i-check").iCheck({checkboxClass:"car-i-check"});var e=[];t(".st-inbox-form-book-car-js").find(".equipment").each(function(i){if(1==t(this)[0].checked){var n=1,o=t(this).closest(".equipment-list");t('select[name="number_equipment"]',o).length&&(n=parseInt(t('select[name="number_equipment"]',o).val())),e.push({title:t(this).attr("data-title"),price:a(t(this).attr("data-price")),price_unit:t(this).data("price-unit"),price_max:t(this).data("price-max"),number_item:n})}}),t(".st_selected_equipments").val(JSON.stringify(e)),t(".car-equipment-list .car-equipment").on("ifChanged",function(e){var i=[],n=new Object;t(".st-inbox-form-book-car-js").find(".car-equipment").each(function(e){if(1==t(this)[0].checked){a(t(this).attr("data-price")),a(t(this).attr("data-price-max"));var o=1,r=t(this).closest(".car-equipment-list");t('select[name="number_equipment"]',r).length&&(o=parseInt(t('select[name="number_equipment"]',r).val())),n[t(this).attr("data-title")]=a(t(this).attr("data-price"))*o,i.push({title:t(this).attr("data-title"),price:a(t(this).attr("data-price")),price_unit:t(this).data("price-unit"),price_max:t(this).data("price-max"),number_item:o})}}),t(".data_price_items").val(JSON.stringify(n)),t(".st_selected_equipments").val(JSON.stringify(i))})}),jQuery(function(t){var a=t("body");t(".st-inbox-form-book-car-js",a).each(function(){var a=t(this),e=t(".date-wrapper",a),i=t(".check-in-out",a),n=t("input[name=pick-up-date]",a),o=t("input[name=pick-up-time]",a),r=t("input[name=drop-off-date]",a),s=t("input[name=drop-off-time]",a),l=t("p.pick-up-date-render",a),c=t("p.pick-up-time-render",a),p=t("p.drop-off-date-render",a),d=t("p.drop-off-time-render",a),m=i.data("minimum-day");"number"!=typeof m&&(m=0);let u=a.data("format-date")||"DD/MM/YYYY",h=a.data("format-time")||"hh:mm A";var f={timePicker:!0,autoUpdateInput:!1,autoApply:!0,disabledPast:!0,dateFormat:u,timeFormat:h,widthSingle:500,onlyShowCurrentMonth:!0,minimumCheckin:m,classNotAvailable:["disabled","off"],enableLoading:!0,todayHighlight:1,opens:"left",timePicker24Hour:"12h"!=st_params.time_format};"undefined"!=typeof availabilityDate&&(f.minDate=availabilityDate),"object"==typeof locale_daterangepicker&&(f.locale=locale_daterangepicker),i.daterangepicker(f,function(t,e,i){t&&e&&(n.val(t.format(a.data("format-date"))),l.html(t.format(a.data("format-date"))),o.val(t.format(a.data("format-time"))),c.html(t.format(a.data("format-time"))),r.val(e.format(a.data("format-date"))),p.html(e.format(a.data("format-date"))),s.val(e.format(a.data("format-time"))),d.html(e.format(a.data("format-time"))))}),e.on("click",function(t){i.trigger("click")})})}),jQuery(function(t){function a(t,a){var e=t.replace(new RegExp(a+"(?!([^<]+)?>)","gi"),'<span class="highlight">$&</span>');return e}var e=!1;0==t("body").find(".option-wrapper.st-option-wrapper-car").length&&t("body").append('<div class="option-wrapper st-option-wrapper-car"></div>'),t(".st-location-name-js").each(function(i,n){var o=t(this).parents("form"),r=t(this),s=r.closest(".st-select-wrapper");t(".option-wrapper",s).remove(),r.on("keyup",function(i){r,e=r,40!=i.which&&38!=i.which&&9!=i.which&&(val=t(this).val(),13!=i.which&&(!1,""!=val?(html="",t("select option",s).prop("selected",!1),t("select option",s).each(function(e,i){var n=t(this).data("country"),o=t(this).text(),r=o.split("||");r=r[0];var s=a(o,val);if(s.indexOf("</span>")>0){var l=t(this).parent("select").attr("data-current-country");void 0!==l&&""!=l?n==l&&(html+='<div style="'+t(this).data("style")+'" data-text="'+o+'" data-country="'+n+'" data-value="'+t(this).val()+'" class="option"><span class="label"><a href="#">'+r+'<i class="fa fa-map-marker"></i></a></div>'):html+='<div style="'+t(this).data("style")+'" data-text="'+o+'" data-country="'+n+'" data-value="'+t(this).val()+'" class="option"><span class="label"><a href="#">'+r+'<i class="fa fa-map-marker"></i></a></div>'}}),t(".option-wrapper").html(html).show(),r.caculatePosition()):(html="",t("select option",s).prop("selected",!1),t("select option",s).each(function(a,e){var i=t(this).data("country"),n=t(this).text(),o=n.split("||");if(o=o[0],""!=n){var r=t(this).parent("select").attr("data-current-country");void 0!==r&&""!=r?i==r&&(html+='<div style="'+t(this).data("style")+'" data-text="'+n+'" data-country="'+i+'" data-value="'+t(this).val()+'" class="option"><span class="label"><a href="#">'+o+'<i class="fa fa-map-marker"></i></a></div>'):html+='<div style="'+t(this).data("style")+'" data-text="'+n+'" data-country="'+i+'" data-value="'+t(this).val()+'" class="option"><span class="label"><a href="#">'+o+'<i class="fa fa-map-marker"></i></a></div>'}}),t(".option-wrapper").html(html).show(),r.caculatePosition())),void 0!==r.data("children")&&""!=r.data("children")&&(name=r.data("children"),t('select[name="'+name+'"]',o).attr("data-current-country",""),t('input[name="drop-off"]',o).val(""),t('select[name="'+name+'"] option',o).prop("selected",!1)))}),r.on("blur",function(a){"clear"==r.data("clear")&&""==t("select option:selected",s).val()&&r.val("")}),r.on("focus",function(a){if("location_origin"!=r.data("id")&&"location_destination"!=r.data("id")&&(e=r),html="",t("select option",s).prop("selected",!1),t("select option",s).each(function(a,e){var i=t(this).data("country"),n=t(this).text(),o=n.split("||");o=o[0];var r="";if(""!=n){var s=t(this).parent("select").attr("data-current-country");void 0!==s&&""!=s?i==s&&(html+='<div style="'+t(this).data("style")+'" data-text="'+n+'" data-country="'+i+'" data-value="'+t(this).val()+'" class="option '+r+'">'+o+'<i class="fa fa-map-marker"></i></div>'):html+='<div  style="'+t(this).data("style")+'" data-text="'+n+'" data-country="'+i+'" data-value="'+t(this).val()+'" class="option '+r+'">'+o+'<i class="fa fa-map-marker"></i></div>'}}),void 0!==r.data("parent")&&""!=r.data("parent")){if(name=r.data("parent"),t('select[name="'+name+'"]',o).length){var i=t('select[name="'+name+'"]',o).parent().find("input.st-location-name-js").val();void 0===i||""==i?(r.val(""),t('select[name="'+name+'"]',o).parent().find("input.st-location-name-js").trigger("focus")):t(".option-wrapper").html(html).show()}}else t(".option-wrapper").html(html).show();r.caculatePosition()}),t(document).on("click",".option-wrapper .option",function(a){if(a.preventDefault(),e.length>0){e.closest("form");var i=e.closest(".st-select-wrapper");!0;var n=t(this).data("value"),o=t(this).text();t(this).data("country");""!=o&&(e.val(o),t('select option[value="'+n+'"]',i).prop("selected",!0),t(".option-wrapper").html("").hide())}}),t("body").on("click",function(a){t(a.target).is(".option-wrapper .option")||t(a.target).is(".st-location-name-js")||t(".option-wrapper").html("").hide()}),r.caculatePosition=function(){if(e&&e.length){var a=t(".option-wrapper"),i=s.offset(),n=i.top+s.height(),o=s.outerWidth(),r=(i.left,o/2),l=99999,c="absolute";t("#search-dialog").length&&(c="fixed",n=n+wpadminbar-t(window).scrollTop(),l=99999),a.css({position:c,top:n,right:r,width:o,"z-index":l})}},t(window).on("resize",function(){r.caculatePosition()}),o.on("submit",function(a){if(""==r.val()&&r.hasClass("required"))return r.trigger("focus"),!1;if(t("input.required-field").length&&1==t("input.required-field").prop("checked")){var e=t('select[name="location_id_pick_up"] option:selected',o).val(),i=t('input[name="pick-up"]',o).val();t('select[name="location_id_drop_off"] option[value="'+e+'"]',o).prop("selected",!0),t('input[name="drop-off"]',o).val(i)}return t("input.required-field").length&&0==t("input.required-field").prop("checked")&&""==t('input[name="drop-off"]',o).val()?(t('input[name="drop-off"]',o).trigger("focus"),t('select[name="location_id_drop_off"] option',o).prop("selected",!1),!1):void 0})}),t.fn.focusNextInputField=function(){return this.each(function(){var a=t(this).parents("form:eq(0),body").find("button:visible,input:visible,textarea:visible,select:visible"),e=a.index(this);return e>-1&&e+1<a.length&&a.eq(e+1).trigger("focus"),!1})}});