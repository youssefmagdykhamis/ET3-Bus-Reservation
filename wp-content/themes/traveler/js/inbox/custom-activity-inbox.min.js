jQuery(function(t){function a(a,o,n,c){var r=t(".st-inbox-form-book"),s=t(".overlay-form",r);s.hide(),xhr=t.ajax({url:st_params.ajax_url,dataType:"json",type:"post",data:{action:"st_get_starttime_activity_frontend",activity_id:a,check_in:o,check_out:n},beforeSend:function(){s.show(),e.addClass("loading")},success:function(a){if(null!=a.data&&a.data.length>0){t(".st_activity_starttime option",r).remove(),t(".activity-starttime",r).show();var o="";for(i=0;i<a.data.length;i++){var n="";"-1"==a.check[i]?a.data[i]==c?o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+"</option>":o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+"</option>":"0"==a.check[i]?a.data[i]==c?o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+" ( "+st_params.no_vacancy+" )</option>":o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+" ( "+st_params.no_vacancy+" )</option>":a.data[i]==c?"1"==a.check[i]?o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+" ( "+st_params.a_vacancy+" )</option>":o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+" ( "+a.check[i]+" "+st_params.more_vacancy+" )</option>":"1"==a.check[i]?o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+" ( "+st_params.a_vacancy+" )</option>":o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+" ( "+a.check[i]+" "+st_params.more_vacancy+" )</option>"}t(".st_activity_starttime",r).append(o),s.hide(),e.removeClass("loading")}else t("#starttime_box").hide(),s.hide(),e.removeClass("loading");requestRunning=!1}}),requestRunning=!0}var e=t(".st-inbox-form-book");if(t(document).ajaxStop(function(){t(".overlay-form").fadeOut(500)}),t("#check_in").length){var o=t("#starttime_hidden_load_form").data("checkin"),n=t("#starttime_hidden_load_form").data("checkout");if(o!=n&&t("input#check_out").parent().parent().show(),""!=o){var c=t("#starttime_hidden_load_form").data("tourid"),r=t("#starttime_hidden_load_form").data("starttime");""!=r&&void 0!==r&&a(c,o,n,r)}}if(t("#select-a-activity").length&&t("#select-a-activity").length){t("#select-a-activity").on("click",function(){t(".check-in-out-input",e).trigger("click")})}t(".date-wrapper",e),t('input[name="check_in"]',e),t('input[name="check_out"]',e);var s=t(".check-in-out-input",e),d=(t(".check-in-render",e),t(".check-out-render",e),t(".sts-tour-checkout-label",e)),l=(t(this).data("availability-date"),t(".date-wrapper",e).data("custom-class")||""),p={singleDatePicker:!0,showCalendar:!1,sameDate:!0,autoApply:!0,disabledPast:!0,dateFormat:"DD/MM/YYYY",enableLoading:!0,showEventTooltip:!0,classNotAvailable:["disabled","off"],disableHightLight:!0,customClass:l,fetchEvents:function(a,e,i,o){var n=[];if(i.flag_get_events)return!1;i.flag_get_events=!0,i.container.find(".loader-wrapper").show();var c={action:s.data("action"),start:a.format("YYYY-MM-DD"),end:e.format("YYYY-MM-DD"),activity_id:s.data("post-id"),security:st_params._s};t.post(st_params.ajax_url,c,function(t){"object"==typeof t?n="object"==typeof t.events?t.events:t:console.log("Can not get data"),o(n,i),i.flag_get_events=!1,i.container.find(".loader-wrapper").hide()},"json")}};t.fn.daterangepicker&&t(".check-in-out-input",e).daterangepicker(p,function(i,o,n,c){let r=i.format(st_params.date_format_calendar.toUpperCase()),l=o.format(st_params.date_format_calendar.toUpperCase());t("input#check_in").val(r),t("input#check_out").val(l),i.format(e.data("format")).toString()==o.format(e.data("format")).toString()?d.hide():d.show(),void 0!==c&&!1!==c&&(c.target.classList.contains("has_starttime")?a(s.data("post-id"),r,l,""):(t(".st_activity_starttime option").remove(),t(".activity-starttime").hide()))})});