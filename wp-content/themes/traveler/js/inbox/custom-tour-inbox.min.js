jQuery(function(t){function a(a,o,n,r){var c=t(".package-info-wrapper"),s=t(".overlay-form",c);s.hide(),t.ajax({url:st_params.ajax_url,dataType:"json",type:"post",data:{action:"st_get_starttime_tour_frontend",tour_id:a,check_in:o,check_out:n},beforeSend:function(){s.show(),e.addClass("loading")},success:function(a){if(null!=a.data&&a.data.length>0){t("#starttime_tour option").remove(),t("#starttime_box").show();var o="";for(i=0;i<a.data.length;i++){var n="";"-1"==a.check[i]?a.data[i]==r?o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+"</option>":o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+"</option>":"0"==a.check[i]?a.data[i]==r?o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+" ( "+st_params.no_vacancy+" )</option>":o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+" ( "+st_params.no_vacancy+" )</option>":a.data[i]==r?"1"==a.check[i]?o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+" ( "+st_params.a_vacancy+" )</option>":o+='<option value="'+a.data[i]+'" selected '+n+">"+a.data[i]+" ( "+a.check[i]+" "+st_params.more_vacancy+" )</option>":"1"==a.check[i]?o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+" ( "+st_params.a_vacancy+" )</option>":o+='<option value="'+a.data[i]+'" '+n+">"+a.data[i]+" ( "+a.check[i]+" "+st_params.more_vacancy+" )</option>"}t("#starttime_tour option").remove(),t("#starttime_tour").append(o),s.hide(),e.removeClass("loading")}else t("#starttime_box").hide(),s.hide();!1}}),!0}var e=t(".st-inbox-form-book");if(t('[data-toggle="tooltip"]').tooltip(),t(document).ajaxStop(function(){t(".overlay-form").fadeOut(500)}),t("#check_in").length){var o=t("#check_in").val(),n=t("#check_out").val();o!=n?t("input#check_out").parent().parent().show():t("input#check_out").parent().parent().hide();var r=t('input[name="type_tour"]').val();if("daily_tour"==r){n=t("#check_in").val();t("input#check_out").parent().hide()}if(""!=o){var c=t("#starttime_hidden_load_form").data("tourid"),s=t("#starttime_hidden_load_form").data("starttime");""!=s&&void 0!==s&&(""==n&&(n=o),a(c,o,n,s))}}t("#select-a-tour").length&&t("#select-a-tour").on("click",function(){t(".check-in-out-input",e).trigger("click")});t(".date-wrapper",e),t('input[name="check_in"]',e),t('input[name="check_out"]',e);var d=t(".check-in-out-input",e),p=(t(".check-in-render",e),t(".check-out-render",e),t(".sts-tour-checkout-label",e)),l=(t(this).data("availability-date"),t(".date-wrapper",e).data("custom-class")||""),u={singleDatePicker:!0,showCalendar:!1,sameDate:!0,autoApply:!0,disabledPast:!0,dateFormat:"DD/MM/YYYY",enableLoading:!0,showEventTooltip:!0,classNotAvailable:["disabled","off"],disableHightLight:!0,customClass:l,fetchEvents:function(a,e,o,i){var n=[];if(o.flag_get_events)return!1;o.flag_get_events=!0,o.container.find(".loader-wrapper").show();var r={action:d.data("action"),start:a.format("YYYY-MM-DD"),end:e.format("YYYY-MM-DD"),tour_id:d.data("post-id"),security:st_params._s};t.post(st_params.ajax_url,r,function(t){"object"==typeof t?n="object"==typeof t.events?t.events:t:console.log("Can not get data"),i(n,o),o.flag_get_events=!1,o.container.find(".loader-wrapper").hide()},"json")}};t.fn.daterangepicker&&t(".check-in-out-input",e).daterangepicker(u,function(o,i,n,r){let c=o.format(st_params.date_format_calendar.toUpperCase()),s=i.format(st_params.date_format_calendar.toUpperCase());t("input#check_in").val(c),t("input#check_out").val(s),o.format(e.data("format")).toString()==i.format(e.data("format")).toString()?p.hide():p.show(),void 0!==r&&!1!==r&&(r.target.classList.contains("has_starttime")?a(d.data("post-id"),c,s,""):(t(".st_tour_starttime option").remove(),t("#starttime_box").hide()))})});